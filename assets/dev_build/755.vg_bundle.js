"use strict";(self.webpackChunkcustom_vf_nextjs=self.webpackChunkcustom_vf_nextjs||[]).push([[755],{49660:(e,t,n)=>{n.d(t,{Z:()=>v});var a=n(92167),r=n(67294),l=n(57897),i=n(15607),o=n(84352),s=r.createElement;function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=(0,i.Gp)((function(e,t){var n=(0,o.G)(c(c({},e),{},{ref:t})),a=n.Component,i=n.label,u=n.description,d=n.isClearable,v=n.startContent,g=n.endContent,p=n.labelPlacement,f=n.hasHelper,m=n.isOutsideLeft,b=n.shouldLabelBeOutside,h=n.errorMessage,y=n.getBaseProps,x=n.getLabelProps,w=n.getInputProps,P=n.getInnerWrapperProps,I=n.getInputWrapperProps,D=n.getMainWrapperProps,k=n.getHelperWrapperProps,O=n.getDescriptionProps,_=n.getErrorMessageProps,N=n.getClearButtonProps,W=i?s("label",x(),i):null,S=(0,r.useMemo)((function(){return d?s("span",N(),g||s(l.f,null)):g}),[d,N]),C=(0,r.useMemo)((function(){return f?s("div",k(),h?s("div",_(),h):u?s("div",O(),u):null):null}),[f,h,u,k,_,O]),Z=(0,r.useMemo)((function(){return v||S?s("div",P(),v,s("input",w()),S):s("div",P(),s("input",w()))}),[v,S,w,P]),E=(0,r.useMemo)((function(){return b?s("div",D(),s("div",I(),m?null:W,Z),C):s(r.Fragment,null,s("div",I(),W,Z),C)}),[p,C,b,W,Z,h,u,D,I,_,O]);return s(a,y(),m?W:null,E)}));d.displayName="NextUI.Input";const v=d},22931:(e,t,n)=>{n.d(t,{Z:()=>b});var a=n(87462),r=n(92167),l=n(45987),i=n(67294),o=n(50262),s=n(15607),u=n(61476),c=n(8514),d=n(84352),v=["style","minRows","maxRows","cacheMeasurements","disableAutosize","onHeightChange"],g=i.createElement;function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=(0,s.Gp)((function(e,t){var n=e.style,r=e.minRows,s=void 0===r?3:r,p=e.maxRows,m=void 0===p?8:p,b=e.cacheMeasurements,h=void 0!==b&&b,y=e.disableAutosize,x=void 0!==y&&y,w=e.onHeightChange,P=(0,l.Z)(e,v),I=(0,d.G)(f(f({},P),{},{ref:t,isMultiline:!0})),D=I.Component,k=I.label,O=I.description,_=I.startContent,N=I.endContent,W=I.hasHelper,S=I.shouldLabelBeOutside,C=I.shouldLabelBeInside,Z=I.errorMessage,E=I.getBaseProps,M=I.getLabelProps,j=I.getInputProps,z=I.getInnerWrapperProps,T=I.getInputWrapperProps,B=I.getHelperWrapperProps,L=I.getDescriptionProps,R=I.getErrorMessageProps,F=(0,i.useState)(s>1),A=F[0],V=F[1],G=(0,i.useState)(!1),U=G[0],H=G[1],q=k?g("label",M(),k):null,J=j(),K=x?g("textarea",(0,a.Z)({},J,{style:(0,u.d)(J.style,null!=n?n:{})})):g(c.Z,(0,a.Z)({},J,{cacheMeasurements:h,"data-hide-scroll":(0,o.PB)(!U),maxRows:m,minRows:s,style:(0,u.d)(J.style,null!=n?n:{}),onHeightChange:function(e,t){if(1===s&&V(e>=2*t.rowHeight),m>s){var n=e>=m*t.rowHeight;H(n)}null==w||w(e,t)}})),X=(0,i.useMemo)((function(){return _||N?g("div",z(),_,K,N):g("div",z(),K)}),[_,J,N,z]);return g(D,E(),S?q:null,g("div",(0,a.Z)({},T(),{"data-has-multiple-rows":(0,o.PB)(A)}),C?q:null,X),W?g("div",B(),Z?g("div",R(),Z):O?g("div",L(),O):null):null)}));m.displayName="NextUI.Textarea";const b=m},84352:(e,t,n)=>{n.d(t,{G:()=>N});var a=n(42982),r=n(92167),l=n(45987),i=n(70885),o=n(15607),s=n(2459),u=n(87487),c=n(33899),d=(0,u.tv)({slots:{base:" vg-group vg-flex vg-flex-col ",label:[" vg-absolute "," vg-z-10 "," vg-pointer-events-none "," vg-origin-top-left "," vg-subpixel-antialiased "," vg-block "," vg-text-small "," vg-text-foreground-500 "],mainWrapper:" vg-h-full ",inputWrapper:" vg-relative vg-w-full vg-inline-flex vg-tap-highlight-transparent vg-flex-row vg-items-center vg-shadow-sm vg-px-3 vg-gap-3 ",innerWrapper:" vg-inline-flex vg-w-full vg-items-center vg-h-full vg-box-border ",input:[" vg-w-full vg-font-normal vg-bg-transparent vg-!outline-none vg-placeholder:text-foreground-500 vg-focus-visible:outline-none "," vg-data-[has-start-content=true]:ps-1.5 "," vg-data-[has-end-content=true]:pe-1.5 "],clearButton:[" vg-p-2 "," vg--m-2 "," vg-z-10 "," vg-hidden "," vg-absolute "," vg-right-3 "," vg-appearance-none "," vg-outline-none "," vg-select-none "," vg-opacity-0 "," vg-hover:!opacity-100 "," vg-cursor-pointer "," vg-active:!opacity-70 "," vg-rounded-full "].concat((0,a.Z)(c.Dh)),helperWrapper:" vg-hidden vg-group-data-[has-helper=true]:flex vg-p-1 vg-relative vg-flex-col vg-gap-1.5 ",description:" vg-text-tiny vg-text-foreground-400 ",errorMessage:" vg-text-tiny vg-text-danger "},variants:{variant:{flat:{inputWrapper:[" vg-bg-default-100 "," vg-data-[hover=true]:bg-default-200 "," vg-group-data-[focus=true]:bg-default-100 "]},faded:{inputWrapper:[" vg-bg-default-100 "," vg-border-medium "," vg-border-default-200 "," vg-data-[hover=true]:border-default-400 "],value:" vg-group-data-[has-value=true]:text-default-foreground "},bordered:{inputWrapper:[" vg-border-medium "," vg-border-default-200 "," vg-data-[hover=true]:border-default-400 "," vg-group-data-[focus=true]:border-default-foreground "]},underlined:{inputWrapper:[" vg-!px-1 "," vg-!pb-0 "," vg-!gap-0 "," vg-relative "," vg-box-border "," vg-border-b-medium ","shadow-[0_1px_0px_0_rgba(0,0,0,0.05)]"," vg-border-default-200 "," vg-!rounded-none "," vg-hover:border-default-300 "," vg-after:content-[''] "," vg-after:w-0 "," vg-after:origin-center "," vg-after:bg-default-foreground "," vg-after:absolute "," vg-after:left-1/2 "," vg-after:-translate-x-1/2 "," vg-after:-bottom-[2px] "," vg-after:h-[2px] "," vg-group-data-[focus=true]:after:w-full "],innerWrapper:" vg-pb-1 ",label:" vg-group-data-[filled-within=true]:text-foreground "}},color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},size:{sm:{label:" vg-text-tiny ",inputWrapper:" vg-h-8 vg-min-h-8 vg-px-2 vg-rounded-small ",input:" vg-text-small ",clearButton:" vg-text-medium "},md:{inputWrapper:" vg-h-10 vg-min-h-10 vg-rounded-medium ",input:" vg-text-small ",clearButton:" vg-text-large "},lg:{inputWrapper:" vg-h-12 vg-min-h-12 vg-rounded-large ",input:" vg-text-medium ",clearButton:" vg-text-large "}},radius:{none:{inputWrapper:" vg-rounded-none "},sm:{inputWrapper:" vg-rounded-small "},md:{inputWrapper:" vg-rounded-medium "},lg:{inputWrapper:" vg-rounded-large "},full:{inputWrapper:" vg-rounded-full "}},labelPlacement:{outside:{mainWrapper:" vg-flex vg-flex-col "},"outside-left":{base:" vg-flex-row vg-items-center vg-flex-nowrap vg-data-[has-helper=true]:items-start ",inputWrapper:" vg-flex-1 ",mainWrapper:" vg-flex vg-flex-col ",label:" vg-relative vg-text-foreground vg-pr-2 "},inside:{label:" vg-text-tiny vg-cursor-text ",inputWrapper:" vg-flex-col vg-items-start vg-justify-center vg-gap-0 ",innerWrapper:" vg-test vg-group-data-[has-label=true]:items-end "}},fullWidth:{true:{base:" vg-w-full "}},isClearable:{true:{input:" vg-peer vg-pr-6 ",clearButton:" vg-peer-data-[filled=true]:opacity-70 vg-peer-data-[filled=true]:block "}},isDisabled:{true:{base:" vg-opacity-disabled vg-pointer-events-none ",inputWrapper:" vg-pointer-events-none ",label:" vg-pointer-events-none "}},isInvalid:{true:{label:" vg-!text-danger ",input:" vg-!placeholder:text-danger vg-!text-danger "}},isRequired:{true:{label:" vg-after:content-['*'] vg-after:text-danger vg-after:ml-0.5 "}},isMultiline:{true:{label:" vg-relative ",inputWrapper:" vg-!h-auto ",innerWrapper:" vg-items-start vg-group-data-[has-label=true]:items-start ",input:" vg-resize-none vg-data-[hide-scroll=true]:scrollbar-hide "}},disableAnimation:{true:{input:" vg-transition-none ",inputWrapper:" vg-transition-none ",label:" vg-transition-none "},false:{inputWrapper:" vg-transition-background vg-motion-reduce:transition-none vg-!duration-150 ",label:[" vg-will-change-auto "," vg-!duration-200 "," vg-!ease-out "," vg-motion-reduce:transition-none "," vg-transition-[transform,color,left,opacity] "],clearButton:[" vg-transition-opacity "," vg-motion-reduce:transition-none "]}}},defaultVariants:{variant:"flat",color:"default",size:"md",fullWidth:!0,labelPlacement:"inside",isDisabled:!1,isMultiline:!1,disableAnimation:!1},compoundVariants:[{variant:"flat",color:"default",class:{input:" vg-group-data-[has-value=true]:text-default-foreground "}},{variant:"flat",color:"primary",class:{inputWrapper:[" vg-bg-primary-50 "," vg-data-[hover=true]:bg-primary-100 "," vg-text-primary "," vg-group-data-[focus=true]:bg-primary-50 "," vg-placeholder:text-primary "],input:" vg-placeholder:text-primary ",label:" vg-text-primary "}},{variant:"flat",color:"secondary",class:{inputWrapper:[" vg-bg-secondary-50 "," vg-text-secondary "," vg-data-[hover=true]:bg-secondary-100 "," vg-group-data-[focus=true]:bg-secondary-50 "," vg-placeholder:text-secondary "],input:" vg-placeholder:text-secondary ",label:" vg-text-secondary "}},{variant:"flat",color:"success",class:{inputWrapper:[" vg-bg-success-50 "," vg-text-success-600 "," vg-dark:text-success "," vg-placeholder:text-success-600 "," vg-dark:placeholder:text-success "," vg-data-[hover=true]:bg-success-100 "," vg-group-data-[focus=true]:bg-success-50 "],input:" vg-placeholder:text-success-600 vg-dark:placeholder:text-success ",label:" vg-text-success-600 vg-dark:text-success "}},{variant:"flat",color:"warning",class:{inputWrapper:[" vg-bg-warning-50 "," vg-text-warning-600 "," vg-dark:text-warning "," vg-placeholder:text-warning-600 "," vg-dark:placeholder:text-warning "," vg-data-[hover=true]:bg-warning-100 "," vg-group-data-[focus=true]:bg-warning-50 "],input:" vg-placeholder:text-warning-600 vg-dark:placeholder:text-warning ",label:" vg-text-warning-600 vg-dark:text-warning "}},{variant:"flat",color:"danger",class:{inputWrapper:[" vg-bg-danger-50 "," vg-text-danger "," vg-dark:text-danger-500 "," vg-placeholder:text-danger "," vg-dark:placeholder:text-danger-500 "," vg-data-[hover=true]:bg-danger-100 "," vg-group-data-[focus=true]:bg-danger-50 "],input:" vg-placeholder:text-danger vg-dark:placeholder:text-danger-500 ",label:" vg-text-danger vg-dark:text-danger-500 "}},{variant:"faded",color:"primary",class:{label:" vg-text-primary ",inputWrapper:" vg-data-[hover=true]:border-primary vg-focus-within:border-primary "}},{variant:"faded",color:"secondary",class:{label:" vg-text-secondary ",inputWrapper:" vg-data-[hover=true]:border-secondary vg-focus-within:border-secondary "}},{variant:"faded",color:"success",class:{label:" vg-text-success ",inputWrapper:" vg-data-[hover=true]:border-success vg-focus-within:border-success "}},{variant:"faded",color:"warning",class:{label:" vg-text-warning ",inputWrapper:" vg-data-[hover=true]:border-warning vg-focus-within:border-warning "}},{variant:"faded",color:"danger",class:{label:" vg-text-danger ",inputWrapper:" vg-data-[hover=true]:border-danger vg-focus-within:border-danger "}},{variant:"underlined",color:"default",class:{input:" vg-group-data-[has-value=true]:text-foreground "}},{variant:"underlined",color:"primary",class:{inputWrapper:" vg-after:bg-primary ",label:" vg-text-primary "}},{variant:"underlined",color:"secondary",class:{inputWrapper:" vg-after:bg-secondary ",label:" vg-text-secondary "}},{variant:"underlined",color:"success",class:{inputWrapper:" vg-after:bg-success ",label:" vg-text-success "}},{variant:"underlined",color:"warning",class:{inputWrapper:" vg-after:bg-warning ",label:" vg-text-warning "}},{variant:"underlined",color:"danger",class:{inputWrapper:" vg-after:bg-danger ",label:" vg-text-danger "}},{variant:"bordered",color:"primary",class:{inputWrapper:" vg-group-data-[focus=true]:border-primary ",label:" vg-text-primary "}},{variant:"bordered",color:"secondary",class:{inputWrapper:" vg-group-data-[focus=true]:border-secondary ",label:" vg-text-secondary "}},{variant:"bordered",color:"success",class:{inputWrapper:" vg-group-data-[focus=true]:border-success ",label:" vg-text-success "}},{variant:"bordered",color:"warning",class:{inputWrapper:" vg-group-data-[focus=true]:border-warning ",label:" vg-text-warning "}},{variant:"bordered",color:"danger",class:{inputWrapper:" vg-group-data-[focus=true]:border-danger ",label:" vg-text-danger "}},{labelPlacement:"inside",color:"default",class:{label:" vg-group-data-[filled-within=true]:text-default-600 "}},{labelPlacement:"outside",color:"default",class:{label:" vg-group-data-[filled-within=true]:text-foreground "}},{radius:"full",size:["sm"],class:{inputWrapper:" vg-px-3 "}},{radius:"full",size:"md",class:{inputWrapper:" vg-px-4 "}},{radius:"full",size:"lg",class:{inputWrapper:" vg-px-5 "}},{disableAnimation:!1,variant:["faded","bordered"],class:{inputWrapper:" vg-transition-colors vg-motion-reduce:transition-none "}},{disableAnimation:!1,variant:"underlined",class:{inputWrapper:" vg-after:transition-width vg-motion-reduce:after:transition-none "}},{variant:["flat","faded"],class:{inputWrapper:(0,a.Z)(c.ID)}},{isInvalid:!0,variant:"flat",class:{inputWrapper:[" vg-bg-danger-50 "," vg-data-[hover=true]:bg-danger-100 "," vg-group-data-[focus=true]:bg-danger-50 "]}},{isInvalid:!0,variant:"bordered",class:{inputWrapper:" vg-!border-danger vg-group-data-[focus=true]:border-danger "}},{isInvalid:!0,variant:"underlined",class:{inputWrapper:" vg-after:bg-danger "}},{labelPlacement:"inside",size:"sm",class:{inputWrapper:" vg-h-12 vg-py-1.5 vg-px-3 "}},{labelPlacement:"inside",size:"md",class:{inputWrapper:" vg-h-14 vg-py-2 "}},{labelPlacement:"inside",size:"lg",class:{label:" vg-text-small ",inputWrapper:" vg-h-16 vg-py-2.5 vg-gap-0 "}},{labelPlacement:"inside",size:"sm",variant:["bordered","faded"],class:{inputWrapper:" vg-py-1 "}},{labelPlacement:["inside","outside"],class:{label:[" vg-group-data-[filled-within=true]:pointer-events-auto "]}},{labelPlacement:["outside","outside-left"],class:{input:" vg-h-full "}},{labelPlacement:"outside",isMultiline:!1,class:{base:" vg-group vg-relative vg-justify-end ",label:[" vg-pb-0 "," vg-z-20 "," vg-top-1/2 "," vg--translate-y-1/2 "," vg-group-data-[filled-within=true]:left-0 "]}},{labelPlacement:["inside"],class:{label:[" vg-group-data-[filled-within=true]:scale-85 "]}},{labelPlacement:["inside"],variant:"flat",class:{innerWrapper:" vg-pb-0.5 "}},{variant:"underlined",size:"sm",class:{innerWrapper:" vg-pb-1 "}},{variant:"underlined",size:["md","lg"],class:{innerWrapper:" vg-pb-1.5 "}},{labelPlacement:"inside",size:["sm","md"],class:{label:" vg-text-small "}},{labelPlacement:"inside",isMultiline:!1,size:"sm",class:{label:[" vg-group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.tiny)/2_-_8px)] "]}},{labelPlacement:"inside",isMultiline:!1,size:"md",class:{label:[" vg-group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_6px)] "]}},{labelPlacement:"inside",isMultiline:!1,size:"lg",class:{label:[" vg-text-medium "," vg-group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_8px)] "]}},{labelPlacement:"inside",variant:["faded","bordered"],isMultiline:!1,size:"sm",class:{label:[" vg-group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.tiny)/2_-_8px_-_theme(borderWidth.medium))] "]}},{labelPlacement:"inside",variant:["faded","bordered"],isMultiline:!1,size:"md",class:{label:[" vg-group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_6px_-_theme(borderWidth.medium))] "]}},{labelPlacement:"inside",variant:["faded","bordered"],isMultiline:!1,size:"lg",class:{label:[" vg-text-medium "," vg-group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_8px_-_theme(borderWidth.medium))] "]}},{labelPlacement:"inside",variant:"underlined",isMultiline:!1,size:"sm",class:{label:[" vg-group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.tiny)/2_-_5px)] "]}},{labelPlacement:"inside",variant:"underlined",isMultiline:!1,size:"md",class:{label:[" vg-group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_3.5px)] "]}},{labelPlacement:"inside",variant:"underlined",size:"lg",isMultiline:!1,class:{label:[" vg-text-medium "," vg-group-data-[filled-within=true]:-translate-y-[calc(50%_+_theme(fontSize.small)/2_-_4px)] "]}},{labelPlacement:"outside",size:"sm",isMultiline:!1,class:{label:[" vg-left-2 "," vg-text-tiny "," vg-group-data-[filled-within=true]:-translate-y-[calc(100%_+_theme(fontSize.tiny)/2_+_16px)] "],base:" vg-data-[has-label=true]:mt-[calc(theme(fontSize.small)_+_8px)] "}},{labelPlacement:"outside",size:"md",isMultiline:!1,class:{label:[" vg-left-3 "," vg-text-small "," vg-group-data-[filled-within=true]:-translate-y-[calc(100%_+_theme(fontSize.small)/2_+_20px)] "],base:" vg-data-[has-label=true]:mt-[calc(theme(fontSize.small)_+_10px)] "}},{labelPlacement:"outside",size:"lg",isMultiline:!1,class:{label:[" vg-left-3 "," vg-text-medium "," vg-group-data-[filled-within=true]:-translate-y-[calc(100%_+_theme(fontSize.small)/2_+_24px)] "],base:" vg-data-[has-label=true]:mt-[calc(theme(fontSize.small)_+_12px)] "}},{labelPlacement:"outside-left",size:"sm",class:{label:" vg-group-data-[has-helper=true]:pt-2 "}},{labelPlacement:"outside-left",size:"md",class:{label:" vg-group-data-[has-helper=true]:pt-3 "}},{labelPlacement:"outside-left",size:"lg",class:{label:" vg-group-data-[has-helper=true]:pt-4 "}},{labelPlacement:["outside","outside-left"],isMultiline:!0,class:{inputWrapper:" vg-py-2 "}},{labelPlacement:"outside",isMultiline:!0,class:{label:" vg-pb-1.5 "}},{labelPlacement:"inside",isMultiline:!0,class:{label:" vg-pb-0.5 ",input:" vg-pt-0 "}},{isMultiline:!0,disableAnimation:!1,class:{input:" vg-transition-height vg-!duration-100 vg-motion-reduce:transition-none "}},{labelPlacement:["inside","outside"],class:{label:[" vg-pe-2 "," vg-max-w-full "," vg-text-ellipsis "," vg-overflow-hidden "]}},{isMultiline:!0,radius:"full",class:{inputWrapper:" vg-data-[has-multiple-rows=true]:rounded-large "}}]}),v=n(33295),g=n(55306),p=n(18419),f=n(44971),m=n(14943),b=n(49869),h=n(54720),y=n(50262),x=n(99373),w=n(67294),P=n(61476),I=n(11086),D=n(83666),k=["ref","as","label","baseRef","wrapperRef","description","errorMessage","className","classNames","autoFocus","startContent","endContent","onClear","onChange","validationState","innerWrapperRef","onValueChange"];function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e){var t=(0,o.oe)(e,d.variantKeys),n=(0,i.Z)(t,2),r=n[0],u=n[1],c=r.ref,O=r.as,N=r.label,W=r.baseRef,S=r.wrapperRef,C=r.description,Z=r.errorMessage,E=r.className,M=r.classNames,j=r.autoFocus,z=r.startContent,T=r.endContent,B=r.onClear,L=r.onChange,R=r.validationState,F=r.innerWrapperRef,A=r.onValueChange,V=void 0===A?function(){}:A,G=(0,l.Z)(r,k),U=(0,w.useCallback)((function(e){V(null!=e?e:"")}),[V]),H=(0,x.z)(r.value,r.defaultValue,U),q=(0,i.Z)(H,2),J=q[0],K=q[1],X=(0,w.useState)(!1),Y=X[0],Q=X[1],$=O||"div",ee=!!J,te=ee||Y,ne=(0,b.W)(null==M?void 0:M.base,E,ee?"is-filled":""),ae=e.isMultiline,re=(0,v.gy)(c),le=(0,v.gy)(W),ie=(0,v.gy)(S),oe=(0,v.gy)(F),se=(0,w.useCallback)((function(){K(""),re.current&&(re.current.value="",re.current.focus()),null==B||B()}),[re,K,B]),ue=(0,D.h)(_(_({},e),{},{"aria-label":(0,h.x)(null==e?void 0:e["aria-label"],null==e?void 0:e.label,null==e?void 0:e.placeholder),inputElementType:ae?"textarea":"input",onChange:K}),re),ce=ue.labelProps,de=ue.inputProps,ve=ue.descriptionProps,ge=ue.errorMessageProps,pe=(0,s.F)({autoFocus:j,isTextInput:!0}),fe=pe.isFocusVisible,me=pe.isFocused,be=pe.focusProps,he=(0,p.X)({isDisabled:!(null==e||!e.isDisabled)}),ye=he.isHovered,xe=he.hoverProps,we=(0,s.F)(),Pe=we.focusProps,Ie=we.isFocusVisible,De=(0,f.L)({onFocusWithinChange:Q}).focusWithinProps,ke=(0,m.r)({isDisabled:!(null==e||!e.isDisabled),onPress:se}).pressProps,Oe="invalid"===R||e.isInvalid,_e=(0,w.useMemo)((function(){var t;return e.labelPlacement&&"inside"!==e.labelPlacement||N?null!==(t=e.labelPlacement)&&void 0!==t?t:"inside":"outside"}),[e.labelPlacement,N]),Ne=!!B||e.isClearable,We=!!N||!!C||!!Z,Se=!!r.placeholder,Ce=!!N,Ze=!!C||!!Z,Ee="outside"===_e||"outside-left"===_e,Me="inside"===_e,je=!!re.current&&((!re.current.value||""===re.current.value||!J||""===J)&&Se),ze="outside-left"===_e,Te=!!z,Be=!!Ee&&("outside-left"===_e||Se||"outside"===_e&&Te),Le="outside"===_e&&!Se&&!Te,Re=(0,w.useMemo)((function(){return d(_(_({},u),{},{isInvalid:Oe,isClearable:Ne}))}),[].concat((0,a.Z)(Object.values(u)),[Oe,Ne,Te])),Fe=(0,w.useCallback)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _(_({ref:le,className:Re.base({class:ne}),"data-slot":"base","data-filled":(0,y.PB)(ee||Se||Te||je),"data-filled-within":(0,y.PB)(te||Se||Te||je),"data-focus-within":(0,y.PB)(Y),"data-focus-visible":(0,y.PB)(fe),"data-readonly":(0,y.PB)(e.isReadOnly),"data-focus":(0,y.PB)(me),"data-hover":(0,y.PB)(ye),"data-required":(0,y.PB)(e.isRequired),"data-invalid":(0,y.PB)(Oe),"data-disabled":(0,y.PB)(e.isDisabled),"data-has-elements":(0,y.PB)(We),"data-has-helper":(0,y.PB)(Ze),"data-has-label":(0,y.PB)(Ce),"data-has-value":(0,y.PB)(!je)},De),t)}),[Re,ne,ee,me,ye,Oe,Ze,Ce,We,je,Te,Y,fe,te,Se,De,e.isReadOnly,e.isRequired,e.isDisabled]),Ae=(0,w.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _(_({"data-slot":"label",className:Re.label({class:null==M?void 0:M.label})},ce),e)}),[Re,ce,null==M?void 0:M.label]),Ve=(0,w.useCallback)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _(_({ref:re,"data-slot":"input","data-filled":(0,y.PB)(ee),"data-filled-within":(0,y.PB)(te),"data-has-start-content":(0,y.PB)(Te),"data-has-end-content":(0,y.PB)(!!T),className:Re.input({class:(0,b.W)(null==M?void 0:M.input,J?"is-filled":"")})},(0,P.d)(be,de,(0,g.z)(G,{enabled:!0,labelable:!0,omitEventNames:new Set(Object.keys(de))}),t)),{},{required:e.isRequired,"aria-readonly":(0,y.PB)(e.isReadOnly),"aria-required":(0,y.PB)(e.isRequired),onChange:(0,I.t)(de.onChange,L)})}),[Re,J,be,de,G,ee,te,Te,T,null==M?void 0:M.input,e.isReadOnly,e.isRequired,L]),Ge=(0,w.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _(_({ref:ie,"data-slot":"input-wrapper","data-hover":(0,y.PB)(ye),"data-focus-visible":(0,y.PB)(fe),"data-focus":(0,y.PB)(me),className:Re.inputWrapper({class:(0,b.W)(null==M?void 0:M.inputWrapper,J?"is-filled":"")})},(0,P.d)(e,xe)),{},{onClick:function(e){re.current&&e.currentTarget===e.target&&re.current.focus()},style:_({cursor:"text"},e.style)})}),[Re,ye,fe,me,J,null==M?void 0:M.inputWrapper]),Ue=(0,w.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _(_({},e),{},{ref:oe,"data-slot":"inner-wrapper",onClick:function(e){re.current&&e.currentTarget===e.target&&re.current.focus()},className:Re.innerWrapper({class:(0,b.W)(null==M?void 0:M.innerWrapper,null==e?void 0:e.className)})})}),[Re,null==M?void 0:M.innerWrapper]),He=(0,w.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _(_({},e),{},{"data-slot":"main-wrapper",className:Re.mainWrapper({class:(0,b.W)(null==M?void 0:M.mainWrapper,null==e?void 0:e.className)})})}),[Re,null==M?void 0:M.mainWrapper]),qe=(0,w.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _(_({},e),{},{"data-slot":"helper-wrapper",className:Re.helperWrapper({class:(0,b.W)(null==M?void 0:M.helperWrapper,null==e?void 0:e.className)})})}),[Re,null==M?void 0:M.helperWrapper]),Je=(0,w.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _(_(_({},e),ve),{},{"data-slot":"description",className:Re.description({class:(0,b.W)(null==M?void 0:M.description,null==e?void 0:e.className)})})}),[Re,null==M?void 0:M.description]),Ke=(0,w.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _(_(_({},e),ge),{},{"data-slot":"error-message",className:Re.errorMessage({class:(0,b.W)(null==M?void 0:M.errorMessage,null==e?void 0:e.className)})})}),[Re,ge,null==M?void 0:M.errorMessage]),Xe=(0,w.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _(_({},e),{},{role:"button",tabIndex:0,"data-slot":"clear-button","data-focus-visible":(0,y.PB)(Ie),className:Re.clearButton({class:(0,b.W)(null==M?void 0:M.clearButton,null==e?void 0:e.className)})},(0,P.d)(ke,Pe))}),[Re,Ie,ke,Pe,null==M?void 0:M.clearButton]);return{Component:$,classNames:M,domRef:re,label:N,description:C,startContent:z,endContent:T,labelPlacement:_e,isClearable:Ne,isInvalid:Oe,hasHelper:Ze,hasStartContent:Te,isLabelOutside:Be,isOutsideLeft:ze,isLabelOutsideAsPlaceholder:Le,shouldLabelBeOutside:Ee,shouldLabelBeInside:Me,hasPlaceholder:Se,errorMessage:Z,getBaseProps:Fe,getLabelProps:Ae,getInputProps:Ve,getMainWrapperProps:He,getInputWrapperProps:Ge,getInnerWrapperProps:Ue,getHelperWrapperProps:qe,getDescriptionProps:Je,getErrorMessageProps:Ke,getClearButtonProps:Xe}}},8871:(e,t,n)=>{n.d(t,{Z:()=>D});var a=n(87462),r=n(92167),l=n(15861),i=n(70885),o=n(64687),s=n.n(o),u=n(67294),c=n(46271),d=n(49660),v=n(73850),g=n(13068),p=n(73711),f=n(47516),m=n(17828),b=n(84962),h=n(57479),y=n(70231),x=n(97693),w=u.createElement;function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const D=function(e){var t=(0,h.F)().getColor,n=(0,u.useState)(e.default||null),r=n[0],o=n[1],P=(0,u.useState)(!1),D=P[0],k=P[1],O=(0,u.useState)(0),_=O[0],N=O[1],W=(0,u.useState)(0),S=W[0],C=W[1],Z=u.useState({fileName:!1}),E=(0,i.Z)(Z,2),M=(E[0],E[1]),j=(0,u.useState)(!1),z=j[0],T=j[1],B=u.useRef(null),L=(0,c.cF)(p.l2,"voiceglow-cdn");u.useEffect((function(){return function(){S&&(null==S||S.cancel())}}),[S]);var R=function(){var t=(0,l.Z)(s().mark((function t(){var n,a,r,i,u,d,v,g,p;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(e){var t=document.createElement("input");t.type="file",t.onchange=function(t){var n=t.target.files[0];e(n)},t.click()}));case 2:if((a=t.sent)&&((r=new FileReader).onload=function(){var e=(0,l.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.result,{type:"file",payload:{name:a.name,size:a.size,type:a.type,base64:n}};case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.readAsDataURL(a)),!e.isDisabled){t.next=6;break}return t.abrupt("return");case 6:if(o(""),i=a.size,u=e.path||"/public",(null===(n=a.name)||void 0===n||null===(n=n.split(".")[1])||void 0===n?void 0:n.toLowerCase())||!1,!e.maxSizeMB){t.next=14;break}if(!(1e6*e.maxSizeMB<i)){t.next=14;break}return alert("Max size: ".concat(e.maxSizeMB," MBs")),t.abrupt("return");case 14:e.accept,d=Math.random().toString(36).slice(2,10),v="".concat(u,"/").concat(d,"_.").concat(a.name.split(".")[1]),g=(0,c.iH)(L,"".concat(v)),p=(0,c.B0)(g,a,{cacheControl:"public,max-age=31536000"}),C(p),p.on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);N(t)}),(function(e){}),(function(){(0,c.Jt)(g).then(function(){var t=(0,l.Z)(s().mark((function t(n){var r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r={url:n,path:"".concat(u),id:e.id||!1,dbFilePath:v,filename:a.name.split(".")[0],sizeKB:Math.round(i/1024)},e.callback&&e.callback(r),o(n),M((function(e){return I(I({},e),{},{fileName:a.name})})),k(!1),N(0);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())})),k(!0);case 22:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,u.useEffect)((function(){var e=B.current,t=function(t){e&&!e.contains(t.target)&&T(!1)};return document.addEventListener("mousedown",t),function(){document.removeEventListener("mousedown",t)}}),[]),w("div",{ref:B,className:" ".concat(e.className||" vg-w-full vg-h-full "," vg-relative vg-z-[10] vg-upload-float-container ")},w(m.M,null,z?w(x.Z,{key:"uploadOptions",className:" vg-flex vg-flex-col vg-p-4 vg-rounded-large vg-absolute ".concat("top"===e.overlayPosition?" vg-bottom-[-50%] vg-right-[-200%] ":" vg-top-[100%] vg-left-0 "," vg-z-[999] vg-w-[250px] vg-bg-background vg-gap-2 ")},w(d.Z,{label:"URL",placeholder:"Link to a File",value:r,onValueChange:function(e){o(e),M((function(e){return I(I({},e),{},{fileName:!1})}))},endContent:w(v.Z,{onPress:function(){T((function(e){return!e})),e.callback&&e.callback({url:r,path:"",id:"",dbFilePath:"",filename:"",sizeKB:0})},isIconOnly:!0},w(y.l_A,{className:" "}))}),w(v.Z,{className:" vg-flex vg-flex-col vg-gap-1 vg-h-auto vg-py-2 ",size:"sm",variant:"solid",onPress:function(){R()}},"Upload",e.maxSizeMB?w("span",{className:" vg-text-[10px] "},e.maxSizeMB," MBs Max"):null)):null),w(v.Z,(0,a.Z)({color:"primary",variant:"light",isIconOnly:!0},e.buttonProps,{onPress:function(){e.noOptions?R():T((function(e){return!e}))},className:" vg-w-full vg-h-full vg-relative ".concat(e.showEditIcon?" vg-flex vg-flex-col ":" "," ").concat(e.className," ")}),w(b.E.div,{className:" vg-absolute vg-bottom-0 vg-right-0 vg-z-1 vg-rotate-x-180 ",animate:{width:"100%",height:"".concat(100===_?0:_,"%"),backgroundColor:"".concat(t("success-500")),bottom:0},transition:{type:"spring",stiffness:600,damping:60,mass:.6}}),w("div",{className:" vg-relative vg-w-full vg-h-full vg-bottom-0 vg-left-0 vg-z-10 vg-flex vg-justify-center vg-items-center "},D&&e.withLoading?w(g.Z,{size:"sm"}):e.children),e.showEditIcon?w(f.y1O,{className:" vg-w-6 vg-h-6 vg-mt-[-10px] "}):null))}},48676:(e,t,n)=>{n.r(t),n.d(t,{RuntimeProvider:()=>C,default:()=>Z,handlePushMessageNoInteract:()=>W,useRuntime:()=>N});var a=n(42982),r=n(92167),l=n(70885),i=n(15861),o=n(64687),s=n.n(o),u=n(67294),c=n(30381),d=n.n(c),v=n(73711),g=n(91148),p=n(39332),f=n(67844),m=n.n(f),b=n(11194),h=n(43953),y=n(26677),x=n(31300),w=n(4070),P=n(28965),I=n(44925),D=u.createElement;function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=(0,u.createContext)("");function N(){var e=(0,u.useContext)(_);if(!e)throw new Error("useUserContext must be used within a UserProvider");return e}function W(e){return S.apply(this,arguments)}function S(){return(S=(0,i.Z)(s().mark((function e(t){var n,a,r,l,i,o,u,c,v,g,p;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.agentID,a=t.userID,r=t.messages,l=t.bucket,i=t.action,o=t.origin,u=t.appendAtStart,c=t.safeAgentData,v=t.vf_variables,"gb-chat"===o||null==c||c.agentPlatform,g="".concat((0,b.MC)({region:"voiceglow-eu"===l?"eu":"na"}),"/agents/").concat(n,"/interact/").concat(a),e.next=4,fetch(g,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({origin:o,appendMessages:null!=r&&r.length?null==r?void 0:r.map((function(e){return O(O({},e),{},{ts:e.ts||d()().unix()})})):void 0,action:i||void 0,appendAtStart:u||!1,variables:v||{},transcriptMetadata:{origin:o}})}).then((function(e){return e.json()}));case 4:return p=e.sent,e.abrupt("return",p);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=function(e){var t,n,r,o,c,f,k,N,S,C,Z,E=(0,I.B)().config,M=(0,p.useParams)(),j=(0,p.useSearchParams)(),z=(0,p.usePathname)(),T=(null==E?void 0:E.ID)||(null==j?void 0:j.get("vg_id"))||(null==M?void 0:M.vg_id)||(null===(t=e.variables)||void 0===t?void 0:t.ID),B=(null==E?void 0:E.userID)||"".concat(T,"_").concat((0,b.D1)()),L={userID:B,loading:!0,chatHistory:[],lastResponse:null,defaultMessageDelay:1e3,variables:e.variables,reload:!1,blockInput:!1,shouldSyncBrowser:!1,blockLoading:!1,blockProactive:!1,blockAll:!1,hasInitStats:!1,manualControl:(null===(n=e.variables)||void 0===n?void 0:n.manualControl)||!1,agentName:"",lang:(null===(r=e.variables)||void 0===r?void 0:r.lang)||"en",showInstantly:!1,isSuperAdmin:!1,showVapiUI:(null==e||null===(o=e.variables)||void 0===o||null===(o=o.vapiConfig)||void 0===o?void 0:o.promptOnWeb)||!1,callOngoing:!1,debugMessages:[],tabKey:"home",sessions:[],selectedSessionId:B,orgUsers:[]},R=m()("runtime_local_".concat(T),L),F=(0,l.Z)(R,2),A=F[0],V=F[1],G=u.useState("undefined"!=typeof window?!T||null==A||!A.userID||(null==A||null===(c=A.variables)||void 0===c?void 0:c.ID)!==T||null!==(f=A.variables)&&void 0!==f&&f.chatForget||null!==(k=e.variables)&&void 0!==k&&k.chatForget||null!=E&&E.userID&&(null==E?void 0:E.userID)!==(null==A?void 0:A.userID)?L:A:L),U=(0,l.Z)(G,2),H=U[0],q=U[1],J=u.useState(!1),K=(0,l.Z)(J,2),X=K[0],Y=K[1],Q=u.useState(null),$=(0,l.Z)(Q,2),ee=$[0],te=$[1],ne=u.useState([]),ae=(0,l.Z)(ne,2),re=ae[0],le=ae[1],ie=u.useState("undefined"!=typeof window?null===(N=window.location)||void 0===N?void 0:N.href:""),oe=(0,l.Z)(ie,2),se=oe[0],ue=oe[1],ce=u.useState(!1),de=(0,l.Z)(ce,2),ve=de[0],ge=de[1],pe=(0,u.useState)("undefined"!=typeof window?"eu"===(null==E?void 0:E.region)||"eu"===(null==M?void 0:M.region)?"voiceglow-eu":"(default)":(null==H||null===(S=H.variables)||void 0===S?void 0:S.region)||"(default)"),fe=pe[0],me=(pe[1],(0,h.ad)(v.l2,fe)),be=(0,y.ky)((0,h.JU)(me,"voiceglow/".concat(T,"/convos/").concat(H.userID||"UNDEFINED","/convo/JSON_STRING")),{snapshotListenOptions:{includeMetadataChanges:!1}}),he=(0,l.Z)(be,3),ye=he[0],xe=he[1],we=(he[2],(0,y.ky)((0,h.JU)(me,"voiceglow/".concat(T,"/convos/").concat(H.userID||"UNDEFINED")),{snapshotListenOptions:{includeMetadataChanges:!1}})),Pe=(0,l.Z)(we,3),Ie=Pe[0],De=(Pe[1],Pe[2],u.useState({})),ke=(0,l.Z)(De,2),Oe=ke[0],_e=ke[1],Ne=u.useState([]),We=(0,l.Z)(Ne,2),Se=We[0],Ce=We[1],Ze=u.useState(!1),Ee=(0,l.Z)(Ze,2),Me=Ee[0],je=Ee[1],ze=u.useState(!1),Te=(0,l.Z)(ze,2),Be=Te[0],Le=Te[1],Re=u.useState(!1),Fe=(0,l.Z)(Re,2),Ae=(Fe[0],Fe[1]),Ve=(null==Oe?void 0:Oe.chatAssignedTo)&&"human-chatting"===(null==Oe?void 0:Oe.state),Ge=m()("geo-data",{ip:"",country:""}),Ue=(0,l.Z)(Ge,2),He=Ue[0];Ue[1];function qe(){return(qe=(0,i.Z)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat((0,g.Sw)({region:"voiceglow-eu"===fe?"eu":"na"}),"/vg/").concat(null==H||null===(t=H.variables)||void 0===t?void 0:t.ID,"/safe-data")).then((function(e){return e.json()})).catch((function(e){}));case 2:null!=(n=e.sent)&&n.orgUsers?q((function(e){return O(O({},e),{},{orgUsers:n.orgUsers})})):q((function(e){return O(O({},e),{},{orgUsers:[]})}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Je(){return(Je=(0,i.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Be&&clearTimeout(Be),e.next=3,fetch("".concat((0,g.Kk)({region:"voiceglow-eu"===fe?"eu":"na"}),"/fb?doc_id=clients/").concat(t.chatAssignedTo)).then((function(e){return e.json()}));case 3:n=e.sent,q((function(e){return O(O({},e),{},{blockInput:!1,manualControl:!0,notice:O(O({},e.notice),{},{custom:"",active:!1})})})),q((function(e){var t;return O(O({},e),{},{agentName:(null===(t=n.name)||void 0===t?void 0:t.split(" ")[0])||""})}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ke(e){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,i.Z)(s().mark((function e(t){var n,a,r,l,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Be&&clearTimeout(Be),e.next=4,(0,h.pl)((0,h.JU)(me,"voiceglow/".concat(T,"/convos/").concat(H.userID||"UNDEFINED")),{state:"ai-chatting",chatAssignedTo:null,lastModified:d()().unix()},{merge:!0});case 4:return q((function(e){return O(O({},e),{},{manualControl:!1,blockInput:!0,agentName:"",notice:O(O({},e.notice),{},{custom:null}),loading:!1,streamingLlm:!1})})),l=Se.findLastIndex((function(e){return e.isAIGenerated})),e.next=8,(0,b.cG)({text:"No response from team..",translateTo:(null===(n=H.variables)||void 0===n?void 0:n.lang)||"en"});case 8:return i=e.sent,(null===(a=Se[l])||void 0===a||null===(a=a.messages)||void 0===a?void 0:a.filter((function(e){return null==e?void 0:e.isAIGenerated})))||[],e.next=12,W({origin:"web-chat",agentID:H.variables.ID,userID:H.userID,messages:[{from:"bot",type:"info:default",item:i,delay:0}],bucket:fe,action:t&&"vg"!==(null==H||null===(r=H.variables)||void 0===r?void 0:r.agentPlatform)?{type:"intent",payload:{entities:[],intent:{name:"VG_HANDOFF_EXIT"},name:"VG_HANDOFF_EXIT",query:"VG_HANDOFF_EXIT"}}:void 0,safeAgentData:H.variables});case 12:if(t){e.next=15;break}return e.next=15,rt(JSON.stringify({type:"VGVF_Channel",payload:i}),{type:"reject"});case 15:q((function(e){return O(O({},e),{},{blockInput:!1,manualControl:!1,agentName:"",notice:O(O({},e.notice),{},{custom:null}),loading:!1,streamingLlm:!1})})),e.next=20;break;case 18:e.prev=18,e.t0=e.catch(0);case 20:case"end":return e.stop()}}),e,null,[[0,18]])})))).apply(this,arguments)}function Ye(e){return Qe.apply(this,arguments)}function Qe(){return Qe=(0,i.Z)(s().mark((function e(t){var n,a,r,l,o,u,c,v,g;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.actionMessage,l=t.instant,o=0,!r||l){e.next=6;break}return Se.forEach((function(e){e.messages.forEach((function(e){e.delay&&(o+=e.delay)}))})),e.next=6,new Promise((function(e){return setTimeout(e,o)}));case 6:return q((function(e){return O(O({},e),{},{manualControl:!1,blockInput:!1,notice:O(O({},e.notice),{},{custom:D(w.Z,null)})})})),u=l?6e4:1e3*(null==r||null===(n=r.item)||void 0===n||null===(n=n.payload)||void 0===n?void 0:n.timeout)||6e4,e.next=10,(0,b.cG)({text:"Please wait, we're notifying the team..",translateTo:(null===(a=H.variables)||void 0===a?void 0:a.lang)||"en"});case 10:return c=e.sent,v=[W({origin:"web-chat",agentID:H.variables.ID,userID:H.userID,messages:[{from:"human",type:"info:default",item:c,delay:0}],bucket:fe,safeAgentData:H.variables}),(0,h.pl)((0,h.JU)(me,"voiceglow/".concat(T,"/convos/").concat(H.userID||"UNDEFINED")),{state:"requested_chat",lastModified:d()().unix()},{merge:!0})],e.next=14,Promise.allSettled(v);case 14:e.sent,g=setTimeout((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ke();case 1:case"end":return e.stop()}}),e)}))),u),Le(g);case 17:case"end":return e.stop()}}),e)}))),Qe.apply(this,arguments)}function $e(e,t){return et.apply(this,arguments)}function et(){return et=(0,i.Z)(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.forEach(function(){var e=(0,i.Z)(s().mark((function e(t){var a,r,l,o,u,c,v,g,p,f,m,h;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("GetBrowserData"!==t.type){e.next=4;break}return r=(0,b.zD)(),e.next=4,rt(JSON.stringify({from:"bot",type:"VGVF_Channel",data:O(O({},r),{},{ip:He.ip,country:He.country}),ts:d()().unix()}));case 4:if("SetRuntime"!==t.type){e.next=11;break}if(u=null===(l=t.item)||void 0===l||null===(l=l.payload)||void 0===l?void 0:l.action,c=null===(o=t.item)||void 0===o||null===(o=o.payload)||void 0===o?void 0:o.payload,"request_handoff"!==u||!n.find((function(e){return"human"===e.from}))){e.next=10;break}return e.next=10,Ye({actionMessage:t});case 10:"set_variables"===u&&q((function(e){return O(O({},e),{},{variables:O(O({},e.variables),c||{})})}));case 11:"no-reply"!==t.type||null!=H&&null!==(a=H.variables)&&void 0!==a&&a.disableNoReplyListener||(g=JSON.stringify(null==t?void 0:t.item),p=0,Se.forEach((function(e){e.messages.forEach((function(e){e.delay&&(p+=e.delay)}))})),null!=t&&null!==(v=t.item)&&void 0!==v&&null!==(v=v.payload)&&void 0!==v&&v.timeout&&(m=p+1e3*(null==t||null===(f=t.item)||void 0===f||null===(f=f.payload)||void 0===f?void 0:f.timeout),h=setTimeout((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q((function(e){return O(O({},e),{},{manualControl:!1,blockInput:!1,notice:O(O({},e.notice),{},{custom:null,active:!1})})})),e.next=3,rt(g,O({},t.item));case 3:case"end":return e.stop()}}),e)}))),m),ge(h)));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)}))),et.apply(this,arguments)}function tt(e,t,n,a){return nt.apply(this,arguments)}function nt(){return nt=(0,i.Z)(s().mark((function t(n,r,l,i){var o,u,c,v,p,f,m,h,y,w,I,D,k,_,N,W,S,C,Z,M,j,T,B,L,R,F,A,V;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n||"UNDEFINED"===n||"undefined"===n||n===(null===(o=H.variables)||void 0===o?void 0:o.ID)||null==H||null===(u=H.variables)||void 0===u||!u.ID||"undefined"===(null==H||null===(c=H.variables)||void 0===c?void 0:c.ID)||e.isChatHistory){t.next=40;break}if(t.prev=1,"vg"!==(null===(v=H.variables)||void 0===v?void 0:v.agentPlatform)){t.next=18;break}if("",[],M=0,null==H||null===(Z=H.variables)||void 0===Z||null===(Z=Z.internal)||void 0===Z||Z.websocketServer,j="".concat((0,g.bR)({region:"voiceglow-eu"===fe?"eu":"na"}),"/interact"),"voiceglow-eu"!==fe){t.next=12;break}return t.next=10,(0,g.qD)({region:"eu"});case 10:(T=t.sent)&&(j="wss://".concat(T,"/interact"));case 12:return(B=new WebSocket(j)).onopen=function(){var e,t,a,l;q((function(e){return O(O({},e),{},{debugMessages:[],loading:!0,streamingLlm:!0})})),[];var i="start"===r?"start":r.payload;if(i){var o={agentId:H.variables.ID,convoId:n,bucket:fe,prompt:i,agentData:H.variables,lightConvoData:O(O({},Oe),{},{userName:(null==E||null===(e=E.user)||void 0===e?void 0:e.name)||(null==Oe?void 0:Oe.userName),userEmail:(null==E||null===(t=E.user)||void 0===t?void 0:t.email)||(null==Oe?void 0:Oe.userEmail),userPhone:(null==E||null===(a=E.user)||void 0===a?void 0:a.phone)||(null==Oe?void 0:Oe.userPhone),userImage:(null==E||null===(l=E.user)||void 0===l?void 0:l.photoUrl)||(null==Oe?void 0:Oe.userImage),origin:"web-chat"})};B.send(JSON.stringify(o))}},B.onmessage=function(t){var n,r=JSON.parse(t.data);if("metadata"===r.type&&(null!=r&&null!==(n=r.metadata)&&void 0!==n&&null!==(n=n.sources)&&void 0!==n&&n.length))return void Ce((function(e){var t,n,l=e[(null==e?void 0:e.length)-1];return 0===M||"bot"!==(null==l?void 0:l.from)?[].concat((0,a.Z)(e),[{from:"bot",messages:[],sources:null==r||null===(t=r.metadata)||void 0===t?void 0:t.sources}]):(e[e.length-1]=O(O({},e[e.length-1]),{},{sources:null==r||null===(n=r.metadata)||void 0===n?void 0:n.sources}),(0,a.Z)(e))}));if("debug"!==r.type){var l;if("action"===(null==r?void 0:r.type))"request_handoff"===(null==r||null===(l=r.action)||void 0===l?void 0:l.type)&&Ye({actionMessage:null,instant:!0});if(r.ui_engine){var i=r.chunk;try{var o,s=(0,P.Z)(i.trim()||"[]"),u={from:"bot",messages:[],ts:d()().unix()};try{u=JSON.parse(s)}catch(e){}null!==(o=u)&&void 0!==o&&null!==(o=o.messages)&&void 0!==o&&o.length&&Ce((function(e){var t=e[(null==e?void 0:e.length)-1];return 0===M||"bot"!==(null==t?void 0:t.from)?[].concat((0,a.Z)(e),[u]):(e[e.length-1]=u,(0,a.Z)(e))}))}catch(e){}}else"chunk"===r.type&&Ce((function(e){var t=e[(null==e?void 0:e.length)-1];if(0===M||"bot"!==(null==t?void 0:t.from))return[].concat((0,a.Z)(e),[{from:"bot",messages:[{from:"bot",type:"text",item:{payload:{message:r.chunk}},ts:d()().unix()}]}]);var n,l=(0,a.Z)(e);if(null!==(n=l[l.length-1])&&void 0!==n&&null!==(n=n.messages)&&void 0!==n&&n.length){var i=l[l.length-1].messages.length-1;return-1!==i&&(l[l.length-1].messages[i].item.payload.message+=r.chunk),(0,a.Z)(l)}return e}));M++}else e.isTest&&!z.includes("prototype")&&q((function(e){return O(O({},e),{},{debugMessages:[].concat((0,a.Z)(e.debugMessages),[{type:"debug",content:r.chunk}])})}))},B.onclose=function(){q((function(e){return O(O({},e),{},{loading:!1,streamingLlm:!1})}))},B.onerror=function(e){q((function(e){return O(O({},e),{},{loading:!1,streamingLlm:!1})}))},t.abrupt("return");case 18:return L=(null==E?void 0:E.vf_variables)||{},R=(null==e?void 0:e.isTest)||!1,t.next=22,fetch("".concat((0,b.MC)({region:"voiceglow-eu"===fe?"eu":"na"}),"/agents/").concat(H.variables.ID,"/interact/").concat(n),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({vg_id:H.variables.ID,action:r,runtime:{variables:e.variables||H.variables,lang:"automatic"===(null===(p=H.variables)||void 0===p?void 0:p.lang)||"automatic"===(null===(f=e.variables)||void 0===f?void 0:f.lang)?(null===(m=navigator)||void 0===m||null===(m=m.language)||void 0===m?void 0:m.split("-")[0])||"en":(null==e||null===(h=e.variables)||void 0===h?void 0:h.lang)||(null==H||null===(y=H.variables)||void 0===y?void 0:y.lang)},inititalTurns:H.reload?[]:l,isTest:R,variables:O(O(O({userOs:(0,b.Ij)()},L),H.variables),i),appendAtStart:!0,origin:"web-chat",transcriptMetadata:O(O({},Oe||{}),{},{userName:(null==E||null===(w=E.user)||void 0===w?void 0:w.name)||(null==Oe?void 0:Oe.userName),userEmail:(null==E||null===(I=E.user)||void 0===I?void 0:I.email)||(null==Oe?void 0:Oe.userEmail),userPhone:(null==E||null===(D=E.user)||void 0===D?void 0:D.phone)||(null==Oe?void 0:Oe.userPhone),userImage:(null==E||null===(k=E.user)||void 0===k?void 0:k.photoUrl)||(null==Oe?void 0:Oe.userImage)})})}).then((function(e){return e.json()}));case 22:if(null==(F=t.sent)||!F.appError||!e.isTest){t.next=27;break}Ce(null!==(A=H.variables)&&void 0!==A&&A.VF_DIALOGUE_API_KEY?x.bO:x.sr),t.next=30;break;case 27:if(400!==(null==F||null===(_=F.debug)||void 0===_||null===(_=_.vfResponse)||void 0===_||null===(_=_.status)||void 0===_?void 0:_.code)||!e.isTest){t.next=30;break}return it("Error in VF request, please check your API key","fail",3e3),t.abrupt("return",Ce(x.bO));case 30:return V=null==F||null===(N=F.turns)||void 0===N||null===(N=N[(null==F||null===(W=F.turns)||void 0===W?void 0:W.length)-1])||void 0===N?void 0:N.messages,null!==(S=F.actionMessages)&&void 0!==S&&S.length&&$e(F.actionMessages,null==F?void 0:F.turns),null!=F&&null!==(C=F.turns)&&void 0!==C&&C.length&&(Ce(null==F?void 0:F.turns),document.dispatchEvent(new CustomEvent("VG_Events",{detail:{event:"new_turn",data:V,ts:d()().unix()}}))),t.abrupt("return",F);case 36:return t.prev=36,t.t0=t.catch(1),null!=e&&e.isTest&&it(e.isTest?"Please double check your VF API key is correct, and have a published version.":"Error Occured, Please restart the chat.","fail",5e3),t.abrupt("return",!1);case 40:case"end":return t.stop()}}),t,null,[[1,36]])}))),nt.apply(this,arguments)}u.useEffect((function(){var t;null!==(t=e.variables)&&void 0!==t&&null!==(t=t.vapiConfig)&&void 0!==t&&t.promptOnWeb&&q((function(e){return O(O({},e),{},{showVapiUI:!0})}))}),[e.variables]),u.useEffect((function(){V(O(O({},H),{},{lastModified:d()().unix()}))}),[H]),u.useEffect((function(){var e;"tabs"===(null==H||null===(e=H.variables)||void 0===e||null===(e=e.ui)||void 0===e?void 0:e.widgetType)&&(!function(){qe.apply(this,arguments)}(),fetch("".concat((0,b.MC)({region:"voiceglow-eu"===fe?"eu":"na"}),"/agents/").concat(H.variables.ID,"/convos/").concat(H.userID,"/sessions")).then((function(e){return e.json()})).then((function(e){if(null!=e&&e.data){var t=null==e?void 0:e.data;q((function(e){return O(O({},e),{},{sessions:t})}))}else q((function(e){return O(O({},e),{},{sessions:[]})}))})))}),[H.userID,null==H||null===(C=H.variables)||void 0===C||null===(C=C.ui)||void 0===C?void 0:C.widgetType,null==H?void 0:H.tabKey,null==H?void 0:H.selectedSessionId]),u.useEffect((function(){var t;null!==(t=H.variables)&&void 0!==t&&t.manualControl&&q((function(t){var n;return O(O({},t),{},{manualControl:(null==H?void 0:H.manualControl)||(null===(n=H.variables)||void 0===n?void 0:n.manualControl)||!1,isSuperAdmin:e.isTest||!1})}))}),[H.variables]),u.useEffect((function(){e.isTest&&q((function(e){return O(O({},e),{},{isSuperAdmin:!0})}))}),[null==e?void 0:e.isTest]),u.useEffect((function(){null!=E&&E.userID&&(null==E?void 0:E.userID)!==(null==A?void 0:A.userID)&&q((function(e){return O(O({},e),{},{userID:(null==E?void 0:E.userID)||"",reload:!0})}))}),[null==E?void 0:E.userID,null==A?void 0:A.userID]),u.useEffect((function(){if(null!=Ie&&Ie.exists()&&H.userID){if(null!=Ie&&Ie.data()&&!1===H.reload){var e=O(O({},Ie.data()),{},{ID:Ie.id});if("human-chatting"===e.state&&e.chatAssignedTo&&(Be&&clearTimeout(Be),Ae(!0),function(e){Je.apply(this,arguments)}(e),Be&&clearTimeout(Be)),"requested_chat"===e.state&&!e.chatAssignedTo){var t,n;q((function(e){return O(O({},e),{},{blockInput:!0,manualControl:!1})}));var a=(null===(t=Se[Se.length-1])||void 0===t||null===(t=t.messages[(null===(n=Se[Se.length-1])||void 0===n||null===(n=n.messages)||void 0===n?void 0:n.length)-1])||void 0===t?void 0:t.ts)||null;a&&d()().unix()>d().unix(a).add(60,"seconds").unix()&&Ke()}return"ai-chatting"===e.state&&(Be&&clearTimeout(Be),Be&&clearTimeout(Be),q((function(e){return O(O({},e),{},{blockInput:!1,manualControl:!1,agentName:"",notice:O(O({},e.notice),{},{custom:null})})}))),_e(e)}return _e({})}}),[Ie,H.userID]),u.useEffect((function(){if(null!=ye&&ye.exists()&&H.userID){if(je(!0),null!=ye&&ye.data()){var e,t=JSON.parse((null===(e=ye.data())||void 0===e?void 0:e.convoTurns_JSON_STRING)||"[]");t.find((function(e){return e.messages.find((function(e){return e.content||e.rawItem}))}))&&(t=t.map((function(e){return O(O({},e),{},{messages:e.messages.map((function(e){return O(O({},e),{},{item:e.rawItem||e.content||e.item})}))})})));var n=t.map((function(e){return O(O({},e),{},{messages:e.messages.map((function(e){return O(O({},e),{},{isLoading:!1})}))})}));if(n.length){if(null!=n&&n.length){var r;null!==(r=n[n.length-1].messages)&&void 0!==r&&r.length||(n[n.length-1].messages=(0,a.Z)(x.tF))}}else n.push({from:"bot",messages:(0,a.Z)(x.tF),ts:d()().unix()});Ce((function(e){return(0,a.Z)(n.map((function(t,n){var a;return O(O({},t),{},{sources:(null===(a=e[n])||void 0===a?void 0:a.sources)||[]})})))}))}else Ae(!1),Ce([]);H.userID&&je(!0)}else je(void 0!==ye||!0===Me)}),[ye,H.userID]),u.useEffect((function(){var e,t;ue(z),q((function(e){return O(O({},e),{},{bucket:fe,region:"voiceglow-eu"===fe?"eu":"na"})})),V((function(e){return O(O({},e),{},{bucket:fe,region:"voiceglow-eu"===fe?"eu":"na"})})),(null!==(e=H.chatHistory)&&void 0!==e&&e.find((function(e){return e.content}))||null!==(t=A.chatHistory)&&void 0!==t&&t.find((function(e){return e.content})))&&q((function(e){return O(O({},e),{},{reload:!0})}))}),[]),u.useEffect((function(){var e,t;se!==(null===(e=window.location)||void 0===e?void 0:e.href)&&null!==(t=H.variables)&&void 0!==t&&t.listenForUrlChanges&&!z.includes("/agents/vf?vg_id")&&rt(JSON.stringify({type:"VGVF_Channel"}),{type:"intent",payload:{entities:[],intent:{name:"VG_URL_CHANGE"},name:"VG_URL_CHANGE",query:"VG_URL_CHANGE"}})}),[z]),u.useEffect((function(){e.variables&&(q((function(t){return O(O({},t),{},{variables:e.variables})})),V((function(t){return O(O({},t),{},{variables:e.variables})})))}),[e.variables]);var at=function(){var e=(0,i.Z)(s().mark((function e(t){var n,r,l,i,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=t.message,i=t.interactPayload,o={from:"human",ts:d()().unix(),messages:"human"===(null===(n=Se[(null==Se?void 0:Se.length)-1])||void 0===n?void 0:n.from)?[].concat((0,a.Z)(null===(r=Se[(null==Se?void 0:Se.length)-1])||void 0===r?void 0:r.messages),[l]):[l]},Ce((function(e){return[].concat((0,a.Z)(e),[o])})),W({agentID:H.variables.ID,userID:H.userID,bucket:fe,messages:[l],safeAgentData:H.variables,action:i,vf_variables:null==t?void 0:t.vf_variables});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rt=function(){var e=(0,i.Z)(s().mark((function e(t,n,r,l,i,o,u){var c,v,g,p,f,m,b,h;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((null==Oe?void 0:Oe.totalUserInteractions)>=(null==H||null===(c=H.variables)||void 0===c||null===(c=c.limits)||void 0===c?void 0:c.maxInteractionsPerUserId)&&null!=H&&null!==(v=H.variables)&&void 0!==v&&null!==(v=v.limits)&&void 0!==v&&v.maxInteractionsPerUserId)){e.next=2;break}return e.abrupt("return",it("Sorry, you've reached the maximum interactions limit.","fail",5e3));case 2:ve&&clearTimeout(ve),Be&&clearTimeout(Be),g=!1,p={},!1;try{"VGVF_Channel"!==(null==(f=JSON.parse(t))?void 0:f.type)&&"no-reply"!==(null==f?void 0:f.type)&&"VG_Response"!==(null==f?void 0:f.type)||(g=!0,f.vf_variables&&(p=f.vf_variables))}catch(e){g=!1}if(m=n||{type:"text",payload:t},b={from:o||"human",type:"text",item:{payload:{message:t}},ts:d()().unix(),isLoading:!!Ve},h={from:o||"human",ts:d()().unix(),messages:[b]},!g&&Ce((function(e){return[].concat((0,a.Z)(e),[h])})),!i&&l&&Ce((function(e){return[].concat((0,a.Z)(e),[l])})),!Ve&&!H.manualControl){e.next=18;break}return W({agentID:H.variables.ID,userID:H.userID,bucket:H.bucket,messages:[b],safeAgentData:H.variables}),e.abrupt("return");case 18:tt(H.userID,m,null!=l&&l.from?[].concat((0,a.Z)(Se),[l]):g?null:[].concat((0,a.Z)(Se),[h]),p).catch((function(e){}));case 19:case"end":return e.stop()}}),e)})));return function(t,n,a,r,l,i,o){return e.apply(this,arguments)}}();function lt(){return(lt=(0,i.Z)(s().mark((function e(t,n){var r,l,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l={from:n||"human",ts:d()().unix(),messages:t.map((function(e){return{from:n||"human",type:"text",item:{payload:{message:e}},ts:d()().unix(),isLoading:!0}}))},i="bot"===(null===(r=Se[Se.length-1])||void 0===r?void 0:r.from)?[].concat((0,a.Z)(Se),[l]):[].concat((0,a.Z)(Se.slice(0,Se.length-1)),[l]),Ce((function(e){return(0,a.Z)(i)})),e.next=5,W({agentID:H.variables.ID,userID:H.userID,bucket:fe,messages:l.messages,safeAgentData:H.variables});case 5:return e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}u.useEffect((function(){if(re.length&&!H.manualControl){var e;q((function(e){return O(O({},e),{},{blockLoading:!0})})),clearTimeout(ee);var t=setTimeout((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q((function(e){return O(O({},e),{},{blockLoading:!1,loading:!0})})),e.next=3,tt(H.userID,{type:"text",payload:re.join(" ")},Se.length?Se:null).catch((function(e){}));case 3:le([]);case 4:case"end":return e.stop()}}),e)}))),null===(e=H.variables)||void 0===e?void 0:e.delayBeforeSubmit);return te(t),function(){clearTimeout(t)}}}),[re]);var it=function(e,t,n){q((function(a){return O(O({},a),{},{notice:{message:e,type:t,duration:n,active:!0}})})),setTimeout((function(){q((function(n){return O(O({},n),{},{notice:{message:e,type:t,active:!1}})}))}),n)};function ot(){return(ot=(0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.pl)((0,h.JU)(me,"voiceglow/".concat(T,"/convos/").concat(H.userID||"UNDEFINED")),{state:"ai-chatting",chatAssignedTo:null,lastModified:d()().unix()},{merge:!0});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function st(e){var t=e.data;"VG_PushMessage"===t.function&&rt(t.payload,!Se.length&&"start")}u.useEffect((function(){var t;if(!H.userID&&null!==(t=H.variables)&&void 0!==t&&t.ID){var n,a,r=(Math.random()+1).toString(36).substring(7),l="".concat((null===(n=H.variables)||void 0===n?void 0:n.ID)||"","_").concat(r),i=(null==E?void 0:E.userID)||(null!==(a=e.variables)&&void 0!==a&&a.chatForget||H.variables.chatForget?l:A.userID||H.userID||l);q((function(e){return O(O({},e),{},{userID:i})})),V((function(e){return O(O({},e),{},{userID:i})}))}}),[null===(Z=H.variables)||void 0===Z?void 0:Z.ID]),u.useEffect((function(){var e;null!==(e=H.variables)&&void 0!==e&&e.ID&&H.userID&&0===Se.length&&!0===Me&&!xe&&!1===X&&!H.manualControl&&(Y(!0),q((function(e){return O(O({},e),{},{blockInput:!1})})),tt(H.userID,"start").catch((function(e){})))}),[H.userID,Me,xe]),u.useEffect((function(){H.reload&&(Ce([]),function(){return ot.apply(this,arguments)}().then((function(){q((function(e){return O(O({},e),{},{reload:!1,blockInput:!1,manualControl:!1,agentName:"",notice:O(O({},e.notice),{},{custom:"",active:!1}),userID:(null==E?void 0:E.userID)||e.userID||"",callOngoing:void 0})})),tt((null==E?void 0:E.userID)||H.userID,"start").then((function(){q((function(e){return O(O({},e),{},{notice:O(O({},e.notice),{},{active:!1,custom:""})})}))})).catch((function(e){}))})))}),[H.reload]),u.useEffect((function(){if(H.userID)return window.addEventListener("message",st),window.voiceflow={chat:{interact:function(e){return W({agentID:H.variables.ID,userID:H.userID,bucket:fe,safeAgentData:H.variables,action:e,origin:"web-chat"})}}},window.VG_ADMIN={interact:function(e){return W({agentID:H.variables.ID,userID:H.userID,bucket:fe,safeAgentData:H.variables,action:e,origin:"web-chat"})},pushMessage:function(e){return function(e){var t,n;H.manualControl&&H.userID&&null!==(t=H.variables)&&void 0!==t&&t.ID?W({userID:H.userID,agentID:null===(n=H.variables)||void 0===n?void 0:n.ID,messages:[{from:e.from,type:e.type,item:{payload:{message:e.payload}},delay:e.delay||0,ts:d()().unix()}],bucket:fe,safeAgentData:H.variables}):rt(e.payload)}(e)},reload:function(){return q((function(e){return O(O({},e),{},{reload:!0})}))},getRuntime:function(e){return O(O({},H),{},{turns:Se})},setRuntime:function(e){q((function(t){var n=O(O({},t),e);return V(n),n}))}},function(){window.removeEventListener("message",st)}}),[H]);var ut={runtime:H,setRuntime:q,setLocalRuntime:V,handlePushMessage:rt,pushChatNotice:it,formattedTurnsValue:Se,setFormattedTurnsValue:Ce,continueInteract:tt,isTest:e.isTest,hasLoaded:Me,lightConvoData:Oe,pushHumanTurnLocal:function(e,t){return lt.apply(this,arguments)},confirmedBucket:fe,handleRequestHandoffInit:Ye,handleVGHandoffReject:Ke,clearNoReplyTimeout:function(){ve&&clearTimeout(ve)},handlePushMessageV2:at};return D(_.Provider,{value:ut},e.children)};const Z=C},4070:(e,t,n)=>{n.d(t,{Z:()=>W});var a=n(42982),r=n(92167),l=n(15861),i=n(70885),o=n(64687),s=n.n(o),u=n(97693),c=n(82280),d=n(73850),v=n(49660),g=n(22931),p=n(67294),f=n(48676),m=n(30381),b=n.n(m),h=n(17828),y=n(84962),x=n(5434),w=n(47516),P=n(79352),I=n(8871),D=n(51649),k=n(91148),O=p.createElement;function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const W=function(e){var t,n,r,o,m,_,W,S=(0,f.useRuntime)(),C=S.runtime,Z=S.setRuntime,E=S.formattedTurnsValue,M=S.confirmedBucket,j=S.setLocalRuntime,z=S.handleVGHandoffReject,T=p.useState(!1),B=(0,i.Z)(T,2),L=B[0],R=B[1],F=p.useState({email:"",message:"",attachmentLinks:[]}),A=(0,i.Z)(F,2),V=A[0],G=A[1],U=p.useState(!1),H=(0,i.Z)(U,2),q=H[0],J=H[1];function K(e){return X.apply(this,arguments)}function X(){return X=(0,l.Z)(s().mark((function e(t){var n,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J(!0),a=[fetch("".concat((0,k.Sw)({region:"voiceglow-eu"===M?"eu":"na"}),"/vg/").concat(null===(n=C.variables)||void 0===n?void 0:n.ID,"/convos/").concat(C.userID,"/notify"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({from:"email-form",emailForm:t,turns:E,agentData:C.variables})}).then((function(e){return e.json()})),(0,f.handlePushMessageNoInteract)({agentID:C.variables.ID,userID:C.userID,messages:[{from:"human",type:"EmailForm",item:t,delay:0}],bucket:M,safeAgentData:C.variables})],e.next=4,Promise.all(a);case 4:e.sent,R(!1),G({email:"",message:"",attachmentLinks:[]}),J(!1);case 9:case"end":return e.stop()}}),e)}))),X.apply(this,arguments)}function Y(){return(Y=(0,l.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.cancelToIntent,document.dispatchEvent(new CustomEvent("VG_Events",{detail:{event:"handoff_cancel",data:{chatOpened:!0,ts:b()().unix()},ts:b()().unix()}})),z({cancelToIntent:n}),Z((function(e){return N(N({},e),{},{notice:N(N({},e.notice),{},{custom:"",active:!1})})})),j((function(e){return N(N({},e),{},{notice:N(N({},e.notice),{},{custom:"",active:!1})})}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return O(u.Z,{divKey:"should_cancel_handoff",className:" vg-absolute vg-bottom-0 vg-w-full vg-h-auto vg-z-50 vg-rounded-large vg-notice-container vg-w-full vg-bg-background/50 vg-backdrop-blur vg-handoff--outer-container"},O("div",{className:" vg-p-5 vg-handoff--inner-container"},O("div",{className:" vg-flex vg-flex-col vg-handoff"},O(h.M,null,O(y.E.div,{key:"handoff-cancel-button",className:" vg-w-full vg-mb-2 vg-handoff-cancel--container",layout:!0},O(d.Z,{className:" vg-bg-danger-50 vg-flex vg-gap-2 vg-justify-center vg-items-center vg-w-full vg-handoff-cancel--btn",onPress:function(){!function(e){Y.apply(this,arguments)}({cancelToIntent:e.cancelToIntent})},variant:"light",color:"danger"},O(x.xg7,{className:" vg-w-5 vg-h-5 vg-flex-shrink-0 vg-handoff-cancel--icon"}),O(c.Z,{className:" vg-font-bold ",text:"Cancel Handoff Request",to:null===(t=C.variables)||void 0===t?void 0:t.lang}))),O(y.E.div,{key:"handoff-sendemail-show",className:" vg-w-full vg-mb-2 vg-handoff-email--container",layout:!0},O(d.Z,{color:"primary",onPress:function(){R((function(e){return!e}))},variant:"light",className:" vg-bg-primary-50 vg-text-primary-900 vg-flex vg-justify-center vg-items-center vg-gap-2 vg-w-full vg-handoff-email--btn"},O(w.PRb,{className:" vg-w-5 vg-h-5 vg-flex-shrink-0 vg-handoff-send--icon"}),O(c.Z,L?{className:" vg-font-bold vg-handoff-hide--text",text:"Hide Prompt",to:null===(n=C.variables)||void 0===n?void 0:n.lang}:{className:" vg-font-bold vg-handoff-send--text",text:"Send an Email",to:null===(r=C.variables)||void 0===r?void 0:r.lang}))),L?O(y.E.form,{className:"vg-handoff-email--form",onSubmit:function(e){e.preventDefault(),K(V)},initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},key:"prompt-email"},O(v.Z,{isDisabled:q,value:V.email,onValueChange:function(e){return G((function(t){return N(N({},t),{},{email:e})}))},type:"email",className:" vg-mb-2 vg-font-bold vg-handoff-email--input",classNames:{input:" vg-font-bold "},label:O(c.Z,{text:"Your Email",to:null===(o=C.variables)||void 0===o?void 0:o.lang}),size:"md",variant:"bordered"}),O(g.Z,{isDisabled:q,className:" vg-mb-2 vg-handoff-message--input",endContent:O(I.Z,{noOptions:!0,className:" vg-bg-primary-50 vg-min-w-0 vg-w-8 vg-h-8 vg-handoff-attachments--btn",callback:function(e){return G((function(t){return N(N({},t),{},{attachmentLinks:[].concat((0,a.Z)(t.attachmentLinks),[{sizeKB:e.sizeKB,filename:e.filename,url:e.url}])})}))},buttonProps:{className:"bg-primary-50 w-5 h-5 flex-shrink-0",color:"default",variant:"light"}},O(P.G1z,{className:" vg-w-5 vg-h-5 vg-flex-shrink-0 vg-handoff-attachments--icon"})),value:V.message,onValueChange:function(e){return G((function(t){return N(N({},t),{},{message:e})}))},label:O(c.Z,{text:"Message",to:null===(m=C.variables)||void 0===m?void 0:m.lang}),size:"sm",variant:"bordered"}),null!==(_=V.attachmentLinks)&&void 0!==_&&_.length&&L?O("div",{key:"handoff-attachments",className:" vg-w-full vg-mb-2 vg-handoff-attachments--outer-container"},O("div",{className:" vg-flex vg-flex-col vg-gap-2 vg-handoff-attachments--inner-container"},V.attachmentLinks.map((function(e,t){return O("div",{key:"attachment_".concat(t),className:" vg-flex vg-gap-2 vg-items-center vg-w-full vg-min-w-0 vg-max-w-auto vg-handoff-attachment--container"},O(P.G1z,{className:" vg-w-4 vg-h-4 vg-flex-shrink-0 vg-handoff-attachment--icon"}),O("p",{className:" vg-text-tiny vg-handoff-attachment--text"},e.filename,"  ",e.sizeKB," KB"),O(d.Z,{isDisabled:q,onPress:function(){return G((function(e){return N(N({},e),{},{attachmentLinks:e.attachmentLinks.filter((function(e,n){return n!==t}))})}))},isIconOnly:!0,className:" vg-bg-danger-50 vg-min-w-0 vg-w-5 vg-h-5 vg-handoff-attachment-remove--btn",color:"danger",variant:"light"},O(D.QAE,{className:" vg-w-3 vg-h-3 vg-handoff-attachment-remove--icon"})))})))):null,O(d.Z,{isDisabled:q,onPress:function(){return K(V)},color:"primary",size:"sm",variant:"light",className:" vg-bg-primary-50 vg-w-32 vg-handoff-form-submit--btn"},O(c.Z,{className:"vg-handoff-form-submit--label",to:(null===(W=C.variables)||void 0===W?void 0:W.lang)||"en"},"Submit"))):null))))}},31300:(e,t,n)=>{n.d(t,{bO:()=>l,sr:()=>i,tF:()=>o});var a=n(30381),r=n.n(a),l=[{from:"bot",messages:[{from:"bot",type:"info:danger",item:"Please double check your API key."},{from:"bot",type:"text",item:{payload:{message:"Something went wrong, either the API key is incorrect or you haven't published on VF or you have only a capture request on start (Required to have at least a text message on initialisation)."}}}],ts:r()().unix()}],i=[{from:"bot",messages:[{from:"bot",type:"text",item:{payload:{message:"Hi, Lets get started!"}}},{from:"bot",type:"text",item:{payload:{message:"First copy & paste your VF API key, **don't forget to always publish on VF after making changes.**"}}},{from:"bot",type:"text",item:{payload:{message:"Then on VG press **save > reset agent**, and you're good to go!"}}}],ts:r()().unix()}],o=[{from:"bot",type:"stealth",ts:r()().unix(),isLoading:!1}]},73711:(e,t,n)=>{n.d(t,{l2:()=>l});var a=n(83977),r=n(68650),l=(0,a.ZF)({apiKey:"AIzaSyDa4-xVrMX57smdpqvq3vU_cw_YJHdGK9g",authDomain:"speakwiz-app.firebaseapp.com",projectId:"speakwiz-app",storageBucket:"speakwiz-app.appspot.com",messagingSenderId:"264031558",appId:"1:264031558:web:aaf1b2d3078125841da947",measurementId:"G-WBEN55T42T"});(0,r.getFirestore)(l),(0,r.getFirestore)(l,"voiceglow-eu")}}]);